(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){},103:function(e,t,a){},105:function(e,t,a){},107:function(e,t,a){},109:function(e,t,a){},111:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(36),l=a.n(s),r=a(116),o=a(2),c=a.n(o),u=a(3),h=a.n(u),d=a(4),p=a.n(d),m=a(5),v=a.n(m),f=a(6),g=a.n(f),E=a(117),y=a(114),k=a(37),C=a.n(k),b=a(8),S=a.n(b);function w(e){return e=e.replace("piaoquantv","yishihui")}var x="https://api.clicli.us",q=a(18),N=a.n(q),M=a(7),U=a.n(M),T=U.a.create({baseURL:x});function V(){return U.a.post("/user/logout")}function A(e,t,a){return T.get("/user",{params:{uname:e,uid:t,uqq:a}})}function D(e){return function(t){function a(e){var t;return c()(this,a),(t=p()(this,v()(a).call(this,e))).state={level:1},t}return g()(a,t),h()(a,[{key:"componentDidMount",value:function(){var e=this;U.a.get("/auth").then(function(t){401===t.data.code?e.props.history.push("/login"):e.setState({level:S.a.get("level")})})}},{key:"render",value:function(){return i.a.createElement(e,N()({state:this.state},this.props))}}]),a}(i.a.Component)}var O,K,L=a(15),I=(a(67),Object(L.map)({state:["redirectTo"],mutations:["logout"]})(O=Object(E.a)(O=D(O=function(e){function t(){return c()(this,t),p()(this,v()(t).apply(this,arguments))}return g()(t,e),h()(t,[{key:"onLogout",value:function(){var e=this;this.props.logout(),V().then(function(t){200===t.data.code&&e.props.history.push("/login")})}},{key:"render",value:function(){return i.a.createElement("header",null,i.a.createElement("ul",null,i.a.createElement(y.a,{to:"/"},i.a.createElement("li",null,"控制台")),this.props.state.level>=2?i.a.createElement(y.a,{to:"/write-article"},i.a.createElement("li",null,"撰写")):null,this.props.state.level>=3?i.a.createElement("li",null,"管理",i.a.createElement("ul",null,i.a.createElement(y.a,{to:"/posts/wait"},i.a.createElement("li",null,"审核稿件")),i.a.createElement(y.a,{to:"/posts/public"},i.a.createElement("li",null,"管理稿件")),i.a.createElement(y.a,{to:"/users/user"},i.a.createElement("li",null,"管理用户")))):null,i.a.createElement("li",{onClick:this.onLogout.bind(this),className:"logout"},"退出"),i.a.createElement("a",{href:"https://www.clicli.me",target:"_blank"},i.a.createElement("li",{className:"logout"},"网站首页"))))}}]),t}(i.a.Component))||O)||O)||O),j=a(16),z=a.n(j),R=(a(72),function(e){function t(){return c()(this,t),p()(this,v()(t).apply(this,arguments))}return g()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.text;return i.a.createElement("div",{className:"toptip",style:{background:this.props.bg}},e)}}]),t}(i.a.Component)),P=(a(30),D(K=function(e){function t(e){var a;return c()(this,t),(a=p()(this,v()(t).call(this,e))).state={qq:a.props.match.params.qq,msg:"",name:"",desc:"",level:""},a}return g()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"loadUser",value:function(){var e=this;A("",0,this.state.qq).then(function(t){200===t.data.code&&e.setState(t.data.user)})}},{key:"handleChange",value:function(e,t){this.setState(z()({},e,t))}},{key:"handleClick",value:function(){var e,t=this;(e=this.state,U.a.post("/user/update/".concat(e.id),{name:e.name,pwd:e.pwd,qq:e.qq,level:parseInt(e.level),desc:e.desc},{headers:{token:S.a.get("token")}})).then(function(e){t.setState({msg:e.data.msg}),setTimeout(function(){t.setState({msg:""})},5e3)})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.state.msg?i.a.createElement(R,{text:this.state.msg,bg:"#b4d896"}):null,i.a.createElement("div",{className:"editor-user"},i.a.createElement("h1",null,"编辑用户"),i.a.createElement("ul",null,i.a.createElement("li",null,"用户名：",i.a.createElement("input",{type:"text",value:this.state.name,onChange:function(t){return e.handleChange("name",t.target.value)}})),i.a.createElement("li",null,"密码：",i.a.createElement("input",{type:"text",placeholder:"留空则不修改",onChange:function(t){return e.handleChange("pwd",t.target.value)}})),i.a.createElement("li",null,"QQ：",i.a.createElement("input",{type:"text",value:this.state.qq,onChange:function(t){return e.handleChange("qq",t.target.value)}})),this.props.state.level>3?i.a.createElement("li",null,"权限：",i.a.createElement("select",{value:this.state.level,onChange:function(t){return e.handleChange("level",t.target.value)}},i.a.createElement("option",{value:"1"},"用户"),i.a.createElement("option",{value:"2"},"作者"),i.a.createElement("option",{value:"3"},"审核"),i.a.createElement("option",{value:"4"},"管理"))):null,i.a.createElement("li",null,"签名：",i.a.createElement("textarea",{value:this.state.desc,onChange:function(t){return e.handleChange("desc",t.target.value)}})),i.a.createElement("li",{className:"center"},i.a.createElement("button",{onClick:this.handleClick.bind(this)},"保存")))))}}]),t}(i.a.Component))||K),B=U.a.create({baseURL:x});function Q(e,t,a,n,i,s){return B.get("/posts",{params:{status:e,sort:t,tag:a,uid:n,page:i,pageSize:s}})}var _=U.a.create({baseURL:x});function J(e,t){return U.a.get("https://jx.clicli.us/upload/auth",{params:{fname:e,rname:t}})}var W,F,G=a(40),$=a.n(G),H=(a(90),function(e){function t(){return c()(this,t),p()(this,v()(t).apply(this,arguments))}return g()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.loadEditor()}},{key:"componentWillReceiveProps",value:function(e){this.props.defaultValue!==e.defaultValue&&this.mde.value(e.defaultValue)}},{key:"loadEditor",value:function(){this.mde=new $.a({element:this.marked,autoDownloadFontAwesome:!0,status:!1,spellChecker:!1,forceSync:!0}),this.bindMde()}},{key:"bindMde",value:function(){var e=this;this.mde.codemirror.on("change",function(){e.props.handleMde(e.mde.value())})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"simpleMDE"},i.a.createElement("textarea",{ref:function(t){return e.marked=t},disabled:!0}))}}]),t}(i.a.Component)),X=(a(92),D(W=function(e){function t(e){var a;return c()(this,t),(a=p()(this,v()(t).call(this,e))).state={title:"",content:"",sort:"完结",status:"wait",msg:"",uid:parseInt(S.a.get("uid")),id:a.props.match.params.editor,text:"撰写",bg:"",tag:"",time:"",videos:[]},a}return g()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.loadArticle(),this.loadVideo(),"/write-article"===this.props.location.pathname?this.setState({text:"添加"}):this.setState({text:"更新"})}},{key:"handleChange",value:function(e,t){this.setState(z()({},e,t))}},{key:"changeMde",value:function(e){this.setState({content:e})}},{key:"loadArticle",value:function(){var e,t=this;this.state.id&&(e=this.state.id,B.get("/post/".concat(e))).then(function(e){var a=e.data.result,n=a.title,i=a.content,s=a.sort,l=a.tag,r=a.status,o=a.time;t.setState({title:n,content:i,sort:s,tag:l,status:r,time:o.slice(0,-3),defaultValue:i})})}},{key:"loadVideo",value:function(){var e,t,a,n=this;this.state.id&&(e=this.state.id,t=1,a=100,_.get("/videos",{params:{pid:e,page:t,pageSize:a}})).then(function(e){n.setState({videos:e.data.videos})})}},{key:"handleClick",value:function(){var e,t,a,n,i,s,l,r,o,c=this;if(!(this.state.title&&this.state.content&&this.state.status&&this.state.sort&&this.state.tag))return this.setState({msg:"都要填写都要填(〃＞皿＜)！",bg:"#ef736e"}),void setTimeout(function(){c.setState({msg:""})},5e3);"/write-article"!==this.props.location.pathname?(e=this.state,t=e.id,a=e.title,n=e.content,i=e.status,s=e.sort,l=e.tag,r=e.uid,o=e.time,U.a.post("/post/update/".concat(t),{title:a,content:n,status:i,sort:s,tag:l,uid:r,time:o},{headers:{token:S.a.get("token")}})).then(function(e){200===e.data.code&&c.setState({msg:"更新成功啦！",text:"更新",bg:"#b4d896"}),setTimeout(function(){c.props.history.push("/article/".concat(c.state.uid)),c.setState({msg:""})},5e3)}):function(e){var t=e.title,a=e.content,n=e.status,i=e.sort,s=e.tag,l=e.uid;return U.a.post("/post/add",{title:t,content:a,status:n,sort:i,tag:s,uid:l},{headers:{token:S.a.get("token")}})}(this.state).then(function(e){200===e.data.code&&c.setState({msg:"添加成功啦",bg:"#b4d896"}),setTimeout(function(){c.props.history.push("/article/".concat(c.state.uid)),c.setState({msg:""})},5e3)})}},{key:"selectTag",value:function(e){this.state.tag.indexOf(e)>-1?this.setState({tag:this.state.tag.replace(" ".concat(e),"")}):this.setState({tag:this.state.tag+" "+e})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.state.msg?i.a.createElement(R,{text:this.state.msg,bg:this.state.bg}):null,i.a.createElement("div",{className:"write-article"},i.a.createElement("h1",null,this.state.text,"稿件"),i.a.createElement("li",null,i.a.createElement("input",{type:"text",placeholder:"请输入标题",value:this.state.title,onChange:function(t){return e.handleChange("title",t.target.value)}})),i.a.createElement(H,{handleMde:function(t){return e.changeMde(t)},value:this.state.content,defaultValue:this.state.defaultValue}),i.a.createElement("span",null,i.a.createElement("select",{onChange:function(t){return e.handleChange("sort",t.target.value)},value:this.state.sort},i.a.createElement("option",{value:"原创"},"原创"),i.a.createElement("option",{value:"新番"},"新番"),i.a.createElement("option",{value:"完结"},"完结"),i.a.createElement("option",{value:"剧场版"},"剧场版"),i.a.createElement("option",{value:"影视"},"影视"))),i.a.createElement("span",null,i.a.createElement("select",{onChange:function(t){return e.handleChange("status",t.target.value)},value:this.state.status},i.a.createElement("option",{value:"wait"},"待审核"),i.a.createElement("option",{value:"remove"},"待删除"),i.a.createElement("option",{value:"under"},"已下架"),this.props.state.level>2?i.a.createElement("option",{value:"public"},"发布"):null)),i.a.createElement("span",null,"/write-article"===this.props.location.pathname?null:i.a.createElement("input",{type:"text",value:this.state.time,onChange:function(t){return e.handleChange("time",t.target.value)}})),i.a.createElement("div",{className:"tags"},i.a.createElement("ul",null,["推荐","转载","漫画改","小说改","耽美","乙女","百合","后宫","热血","战斗","运动","奇幻","神魔","搞笑","冒险","校园","恐怖","穿越","推理","科幻","日常","古风","恋爱","r15","泡面番","治愈","鬼畜","AMV/MAD","音乐·PV","游戏·GMV","VOCALOID","影视","特摄","真人剧","其它"].map(function(t,a){return i.a.createElement("li",{onClick:function(){return e.selectTag(t)},key:a,className:e.state.tag.indexOf(t)>-1?"active":""},t)}))),i.a.createElement("div",{className:"video-list"},this.state.videos?this.state.videos.map(function(e){return i.a.createElement(y.a,{to:"/editor-video/"+e.id,key:e.id},i.a.createElement("li",null,i.a.createElement("div",{className:"title"},e.oid)))}):null,"/write-article"===this.props.location.pathname?null:i.a.createElement(y.a,{to:"/add-video/".concat(this.state.id)},i.a.createElement("li",{className:"add"},i.a.createElement("div",null,"＋")))),i.a.createElement("div",null,i.a.createElement("button",{onClick:this.handleClick.bind(this)},this.state.text,"稿件"))))}}]),t}(i.a.Component))||W),Y=a(23),Z=a.n(Y),ee=a(41),te=a.n(ee),ae=D(F=Object(E.a)(F=function(e){function t(e){var a;return c()(this,t),(a=p()(this,v()(t).call(this,e))).state={id:a.props.match.params.id,oid:"",title:"",content:"",pid:a.props.match.params.pid,text:"修改",uid:parseInt(S.a.get("uid")),zhilian:!0,per:0},a}var a;return g()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.props.location.pathname.indexOf("add-video")>-1?this.setState({text:"添加"}):(this.loadVideo(),this.setState({text:"修改"}))}},{key:"loadVideo",value:function(){var e,t=this;(e=this.state.id,_.get("/video/".concat(e))).then(function(e){200===e.data.code&&t.setState(e.data.result)})}},{key:"handleChange",value:function(e,t){this.setState(z()({},e,t))}},{key:"deleteVideo",value:function(){var e,t=this;(e=this.state.id,U.a.post("/video/delete?id=".concat(e),{},{headers:{token:S.a.get("token")}})).then(function(e){200===e.data.code&&(t.setState({msg:"删除成功啦"}),setTimeout(function(){t.props.history.goBack(),t.setState({msg:""})},2e3))})}},{key:"handleClick",value:function(){var e,t,a,n,i,s,l,r=this;this.props.location.pathname.indexOf("editor-video")>-1?(e=this.state,t=e.id,a=e.oid,n=e.title,i=e.content,s=e.pid,l=e.uid,i=w(i),U.a.post("/video/update/".concat(t),{oid:parseInt(a),title:n,content:i,pid:parseInt(s),uid:l},{headers:{token:S.a.get("token")}})).then(function(e){200===e.data.code&&r.setState({msg:"更新成功啦"}),setTimeout(function(){r.props.history.goBack(),r.setState({msg:""})},2e3)}):this.addVideos()}},{key:"addVideos",value:function(){var e,t,a,n,i,s,l=this;(e=this.state,t=e.oid,a=e.title,n=e.content,i=e.pid,s=e.uid,n=w(n),U.a.post("/video/add",{oid:parseInt(t),title:a,content:n,pid:parseInt(i),uid:s},{headers:{token:S.a.get("token")}})).then(function(e){200===e.data.code&&l.setState({msg:"添加成功啦"}),setTimeout(function(){l.props.history.goBack(),l.setState({msg:""})},2e3)})}},{key:"onUpload",value:(a=te()(Z.a.mark(function e(){var t,a,n,i;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,a=this.refs.uploader.files[0],n=this.state.pid+" | "+this.state.oid,e.next=5,J(a.name,n).then(function(e){return e.data.uploadToken});case 5:i=e.sent,console.log(i),new DogeUploader({file:a,token:i,next:function(e){t.setState({per:"".concat(Math.floor(e.percent))})},error:function(e){alert("上传出错( "+e.code+" )："+e.message)},complete:function(e){console.log("上传完成，视频 vid："+e.vid),t.setState({content:"".concat(e.vid,"@dogecloud"),per:0})}}).upload();case 9:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"zhilian",value:function(){this.setState({zhilian:!this.state.zhilian})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.state.msg?i.a.createElement(R,{text:this.state.msg,bg:"#b4d896"}):null,this.state.per?i.a.createElement("div",{className:"per"},this.state.per+"%"):null,i.a.createElement("div",{className:"editor-user"},i.a.createElement("h1",null,this.state.text,"视频"),i.a.createElement("ul",null,i.a.createElement("li",null,"序号：",i.a.createElement("input",{type:"text",value:this.state.oid,placeholder:"数字",onChange:function(t){return e.handleChange("oid",t.target.value)}})),i.a.createElement("li",null,"备注：",i.a.createElement("input",{type:"text",value:this.state.title,placeholder:"可不填",onChange:function(t){return e.handleChange("title",t.target.value)}})),i.a.createElement("li",null,i.a.createElement("span",{onClick:this.zhilian.bind(this)},this.state.zhilian?"直链":"上传"),"：",this.state.zhilian?i.a.createElement("input",{type:"text",value:this.state.content,placeholder:"支持mp4、m3u8等直链",onChange:function(t){return e.handleChange("content",t.target.value)}}):i.a.createElement("div",null,i.a.createElement("div",{id:"uploader"},i.a.createElement("span",null,"上传"),i.a.createElement("input",{type:"file",ref:"uploader",accept:"video/*",onChange:this.onUpload.bind(this)})),i.a.createElement("div",{style:{height:"55px"}}))," "),i.a.createElement("li",{className:"center"},i.a.createElement("button",{onClick:this.handleClick.bind(this)},"提交"),i.a.createElement("button",{onClick:this.deleteVideo.bind(this)},"删除")))))}}]),t}(i.a.Component))||F)||F,ne=a(17),ie=a.n(ne);function se(e){return function(t){function a(e){var t;return c()(this,a),(t=p()(this,v()(a).call(this,e))).state={},t.handleChange=t.handleChange.bind(ie()(ie()(t))),t}return g()(a,t),h()(a,[{key:"handleChange",value:function(e,t){this.setState(z()({},e,t))}},{key:"render",value:function(){return i.a.createElement(e,N()({handleChange:this.handleChange,state:this.state},this.props))}}]),a}(i.a.Component)}a(35);var le,re,oe,ce,ue=Object(L.map)({state:["isAuth","msg","bg"],actions:["onLogin"]})(le=se(le=Object(E.a)(le=function(e){function t(){return c()(this,t),p()(this,v()(t).apply(this,arguments))}return g()(t,e),h()(t,[{key:"onKeyUp",value:function(e){13===e.keyCode&&this.onLogin()}},{key:"onLogin",value:function(){this.props.onLogin(this.props.state)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.props.isAuth?setTimeout(function(){e.props.history.push("/")},2e3):null,this.props.msg?i.a.createElement(R,{text:this.props.msg,bg:this.props.bg}):null,i.a.createElement("div",{className:"login"},i.a.createElement("h1",null,"登录"),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("input",{type:"text",placeholder:"用户名",onChange:function(t){return e.props.handleChange("name",t.target.value)},onKeyUp:function(t){return e.onKeyUp(t)}})),i.a.createElement("li",null,i.a.createElement("input",{type:"password",placeholder:"密码",onChange:function(t){return e.props.handleChange("pwd",t.target.value)},onKeyUp:function(t){return e.onKeyUp(t)}})),i.a.createElement("li",null,i.a.createElement("button",{onClick:this.onLogin.bind(this)},"登录")),i.a.createElement("li",null,i.a.createElement(y.a,{to:"/register"},"注册")))))}}]),t}(i.a.Component))||le)||le)||le,he=(a(97),Object(E.a)(re=function(e){function t(e){var a;return c()(this,t),(a=p()(this,v()(t).call(this,e))).state={v:""},a}return g()(t,e),h()(t,[{key:"selectInput",value:function(){this.props.history.push("".concat(this.props.prefix).concat(this.state.v))}},{key:"handleChange",value:function(e){this.setState({v:e})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"reach-box"},i.a.createElement("input",{type:"text",placeholder:this.props.text,onChange:function(t){return e.handleChange(t.target.value)}}),i.a.createElement("button",{onClick:this.selectInput.bind(this)},"跳转"))}}]),t}(i.a.Component))||re),de=(a(99),Object(E.a)(oe=function(e){function t(e){var a;return c()(this,t),(a=p()(this,v()(t).call(this,e))).state={users:[],uid:""},a}return g()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e,t=this;(e=this.props.match.params.level,T.get("/users",{params:{level:e,page:1,pageSize:100}})).then(function(e){200===e.data.code&&t.setState({users:e.data.users})})}},{key:"render",value:function(){return i.a.createElement("div",{className:"user-list"},i.a.createElement("div",{className:"role"},i.a.createElement(y.a,{to:"/users/user",style:{padding:"20px"}},"用户"),i.a.createElement(y.a,{to:"/users/author"},"作者"),i.a.createElement(y.a,{to:"/users/editor",style:{padding:"20px"}},"审核")),i.a.createElement("ul",null,"/users/user"===this.props.location.pathname?i.a.createElement(he,{text:"请输入qq",prefix:"/editor-user/"}):this.state.users.map(function(e){var t="http://q2.qlogo.cn/headimg_dl?dst_uin="+e.qq+"&spec=100";return i.a.createElement("li",{key:e.id},i.a.createElement(y.a,{to:"/editor-user/"+e.name},i.a.createElement("div",{className:"avatar"},i.a.createElement("img",{src:t,alt:""})),i.a.createElement("div",{className:"name"},e.name)))})))}}]),t}(i.a.Component))||oe),pe=(a(101),a(103),function(e){function t(){return c()(this,t),p()(this,v()(t).apply(this,arguments))}return g()(t,e),h()(t,[{key:"closeShow",value:function(){this.props.closeShow()}},{key:"confirm",value:function(){this.props.confirm(this.props.id)}},{key:"render",value:function(){return i.a.createElement("div",{className:"confirm"},i.a.createElement("div",{className:"text"},"确认删除吗？"),i.a.createElement("ul",{className:"option"},i.a.createElement("li",{onClick:this.closeShow.bind(this)},"取消"),i.a.createElement("li",{onClick:this.confirm.bind(this)},"确认")))}}]),t}(i.a.Component));U.a.create({baseURL:x});var me,ve,fe,ge=Object(E.a)(ce=function(e){function t(e){var a;return c()(this,t),(a=p()(this,v()(t).call(this,e))).state={isShow:!1,id:""},a}return g()(t,e),h()(t,[{key:"handleDelete",value:function(e){var t,a=this;Promise.all([function(e){return U.a.post("/post/delete/".concat(e),{},{headers:{token:S.a.get("token")}})}(e),(t=e,U.a.post("/comment/delete?pid=".concat(t))),function(e){return U.a.post("/video/delete?pid=".concat(e),{},{headers:{token:S.a.get("token")}})}(e)]).then(function(){a.props.refresh()}),this.setState({isShow:!1,id:""})}},{key:"handleShow",value:function(e){this.setState({isShow:!0,id:e})}},{key:"closeShow",value:function(){this.setState({isShow:!1})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"listview"},!0===this.state.isShow?i.a.createElement(pe,{id:this.state.id,confirm:this.handleDelete.bind(this),closeShow:this.closeShow.bind(this)}):null,i.a.createElement("li",{style:{border:"0",padding:"10px 20px",fontWeight:"bold"}},i.a.createElement("div",{className:"title",style:{color:"#444"}},"标题"),i.a.createElement("div",{className:"sort"},"分类"),i.a.createElement("div",{className:"status"},"状态"),i.a.createElement("div",{className:"action"},"操作")),i.a.createElement("ul",{style:{background:"#fff",padding:"0 10px"}},this.props.list?this.props.list.map(function(t){return i.a.createElement("li",{key:t.id},i.a.createElement("div",{className:"title"},i.a.createElement(y.a,{to:"/editor-article/"+t.id},t.title)),i.a.createElement("div",{className:"sort"},t.sort),i.a.createElement("div",{className:"status"},t.status),i.a.createElement("div",{className:"action"},i.a.createElement("i",{className:"icon-font icon-del",onClick:function(){e.handleShow(t.id)}}),i.a.createElement(y.a,{to:"/editor-article/"+t.id},i.a.createElement("i",{className:"icon-font icon-editor"}))))}):i.a.createElement("h1",null,"没有文章(′⌒`)")))}}]),t}(i.a.Component))||ce,Ee=Object(E.a)(me=function(e){function t(e){var a;return c()(this,t),(a=p()(this,v()(t).call(this,e))).state={posts:[]},a}return g()(t,e),h()(t,[{key:"loadArticles",value:function(){var e=this;Q(this.props.match.params.status,"","","",1,100).then(function(t){200===t.data.code&&e.setState({posts:t.data.posts})})}},{key:"loadAuthorArticle",value:function(){var e=this;Q("","","",this.props.match.params.author,1,100).then(function(t){200===t.data.code&&e.setState({posts:t.data.posts})})}},{key:"refresh",value:function(){var e=this.props.location.pathname;if("/posts/wait"===e||"/posts/public"===e||"/posts/under"===e)return this.loadArticles();this.loadAuthorArticle()}},{key:"render",value:function(){return i.a.createElement("div",{className:"article-list"},i.a.createElement(he,{text:"请输入文章id",prefix:"/editor-article/"}),i.a.createElement(y.a,{to:"/posts/wait"},"待审核"),i.a.createElement(y.a,{to:"/posts/under",style:{padding:"20px"}},"已下架"),i.a.createElement(y.a,{to:"/posts/public"},"已发布"),i.a.createElement(ge,{list:this.state.posts,refresh:this.refresh.bind(this)}))}},{key:"componentDidMount",value:function(){this.refresh()}}]),t}(i.a.Component))||me,ye=se(ve=function(e){function t(e){var a;return c()(this,t),(a=p()(this,v()(t).call(this,e))).state={msg:"",bg:""},a.onRegister=a.onRegister.bind(ie()(ie()(a))),a}return g()(t,e),h()(t,[{key:"onRegister",value:function(){var e,t=this;if(!(this.props.state.name&&this.props.state.pwd&&this.props.state.repeatPwd&&this.props.state.qq))return this.setState({msg:"都要填写都要填(〃＞皿＜)！",bg:"#ef736e"}),void setTimeout(function(){t.setState({msg:""})},4500);(e=this.props.state,U.a.post("/user/register",{name:e.name,pwd:e.pwd,qq:e.qq,level:1,desc:"人懒，竟然没有签名~"})).then(function(e){200===e.status&&201===e.data.code?(t.setState({msg:e.data.msg,bg:"#b4d896"}),setTimeout(function(){t.props.history.push("/login")},2e3)):t.setState({msg:e.data.msg,bg:"#ef736e"})})}},{key:"onKeyUp",value:function(e){13===e.keyCode&&this.onRegister()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.state.msg?i.a.createElement(R,{text:this.state.msg,bg:this.state.bg}):null,i.a.createElement("div",{className:"login"},i.a.createElement("h1",null,"注册"),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("input",{type:"text",placeholder:"QQ号",onChange:function(t){return e.props.handleChange("qq",t.target.value)},onKeyUp:function(t){return e.onKeyUp(t)}})),i.a.createElement("li",null,i.a.createElement("input",{type:"text",placeholder:"用户名",onChange:function(t){return e.props.handleChange("name",t.target.value)},onKeyUp:function(t){return e.onKeyUp(t)}})),i.a.createElement("li",null,i.a.createElement("input",{type:"password",placeholder:"密码",onChange:function(t){return e.props.handleChange("pwd",t.target.value)},onKeyUp:function(t){return e.onKeyUp(t)}})),i.a.createElement("li",null,i.a.createElement("input",{type:"password",placeholder:"确认密码",onChange:function(t){return e.props.handleChange("repeatPwd",t.target.value)},onKeyUp:function(t){return e.onKeyUp(t)}})),i.a.createElement("li",null,i.a.createElement("button",{onClick:this.onRegister},"注册")),i.a.createElement("li",null,i.a.createElement("a",{href:"/"},"返回首页")))))}}]),t}(i.a.Component))||ve,ke=(a(105),D(fe=function(e){function t(e){var a;return c()(this,t),(a=p()(this,v()(t).call(this,e))).state={user:{}},a}return g()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this;S.a.get("uid")&&A("",S.a.get("uid")).then(function(t){e.setState({user:t.data.user})})}},{key:"render",value:function(){var e=function(e){if(/^[0-9]+$/.test(e))return"http://q1.qlogo.cn/g?b=qq&nk=".concat(e,"&s=5");var t=C()(e);return"https://cdn.v2ex.com/gravatar/".concat(t)}(this.state.user.qq),t="/article/"+this.state.user.id,a="/editor-user/"+this.state.user.qq;return i.a.createElement("div",{className:"user-info"},i.a.createElement("div",{className:"avatar"},i.a.createElement("img",{src:e,alt:"作者头像"})),i.a.createElement("div",{className:"name"},"欢迎！",this.state.user.name," sama~"),i.a.createElement("div",{className:"uid"},i.a.createElement("span",null,"uid : ",this.state.user.id)),i.a.createElement("div",{className:"quick-start"},"快速开始：","user"!==this.props.state.role?i.a.createElement("span",null,i.a.createElement(y.a,{to:"/write-article"},"投稿")):null,"user"!==this.props.state.role?i.a.createElement("span",null,i.a.createElement(y.a,{to:t},"查看稿件")):null,i.a.createElement("span",null,i.a.createElement(y.a,{to:a},"设置"))))}}]),t}(i.a.Component))||fe),Ce=a(118),be=a(115),Se=function(e){function t(){return c()(this,t),p()(this,v()(t).apply(this,arguments))}return g()(t,e),h()(t,[{key:"render",value:function(){return i.a.createElement(Ce.a,null,i.a.createElement(be.a,{path:"/login",component:ue}),i.a.createElement(be.a,{path:"/register",component:ye}),i.a.createElement(be.a,{path:"/",render:function(e){return i.a.createElement("div",null,i.a.createElement(I,null),i.a.createElement(Ce.a,null,i.a.createElement(be.a,{path:"/editor-article/:editor",component:X,key:"editor"}),i.a.createElement(be.a,{path:"/write-article",component:X,key:"write"}),i.a.createElement(be.a,{path:"/editor-video/:id",component:ae,key:"editor-video"}),i.a.createElement(be.a,{path:"/add-video/:pid",component:ae,key:"add-video"}),i.a.createElement(be.a,{exact:!0,path:"/editor-user/:qq",component:P}),i.a.createElement(be.a,{path:"/article/:author",component:Ee,key:"author"}),i.a.createElement(be.a,{path:"/posts/:status",component:Ee,key:location.pathname}),i.a.createElement(be.a,{path:"/users/:role",component:de,key:location.pathname}),i.a.createElement(be.a,{path:"/",component:ke})))}}))}}]),t}(i.a.Component),we=(a(107),a(109),a(111),{onLogin:function(e,t){var a=e.commit;return t.name&&t.pwd||(a("errMsg","都要填都要填！"),setTimeout(function(){a("errMsg","")},4500)),function(e){return U.a.post("/user/login",{name:e.name,pwd:e.pwd})}(t).then(function(e){a("errMsg",""),200===e.status?a("login",e.data):(a("errMsg",e.data.msg),setTimeout(function(){a("errMsg","")},4500))})},onLogout:function(e){var t=e.commit;return V().then(function(e){200===e.data.code&&(t("logout",e.data),setTimeout(function(){t("errMsg","")},4500))})}}),xe=new L.Store({state:{isAuth:!1,redirectTo:"",bg:"",msg:"",user:{}},mutations:{login:function(e,t){e.msg=t.msg,e.isAuth=!0,e.bg="#b4d896"},errMsg:function(e,t){e.msg=t,e.bg="#ef736e"},logout:function(e){e.isAuth=!1,e.msg="退出成功啦",e.bg="#b4d896"}},actions:we});l.a.render(i.a.createElement(L.Provider,{store:xe},i.a.createElement(r.a,null,i.a.createElement(Se,null))),document.getElementById("app"))},30:function(e,t,a){},35:function(e,t,a){},67:function(e,t,a){},72:function(e,t,a){},88:function(e,t){},90:function(e,t,a){},92:function(e,t,a){},97:function(e,t,a){},99:function(e,t,a){}},[[113,2,1]]]);