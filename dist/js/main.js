(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(t,e,n){},104:function(t,e,n){},106:function(t,e,n){},108:function(t,e,n){},110:function(t,e,n){"use strict";n.r(e);var a,i,o,r,l=n(0),s=n.n(l),u=n(41),c=n.n(u),d=n(132),h=n(3),m=n.n(h),p=n(4),f=n.n(p),v=n(5),g=n.n(v),E=n(6),k=n.n(E),b=n(7),y=n.n(b),C=n(133),S=n(125),w=n(14),x=n(16),O=n(20),q=n(15),M=(n(73),Object(O.map)({state:["redirectTo"],mutations:["logout"]})(a=Object(C.a)(a=Object(x.a)(a=function(t){function e(){return m()(this,e),g()(this,k()(e).apply(this,arguments))}return y()(e,t),f()(e,[{key:"onLogout",value:function(){var t=this;this.props.logout(),Object(q.d)().then(function(e){200===e.data.code&&t.props.history.push("/login")})}},{key:"render",value:function(){return s.a.createElement("header",null,s.a.createElement("ul",null,s.a.createElement(S.a,{to:"/"},s.a.createElement("li",null,"控制台")),this.props.state.level>=2?s.a.createElement(S.a,{to:"/write-article"},s.a.createElement("li",null,"撰写")):null,this.props.state.level>=3?s.a.createElement("li",null,"管理",s.a.createElement("ul",null,s.a.createElement(S.a,{to:"/posts/wait"},s.a.createElement("li",null,"审核稿件")),s.a.createElement(S.a,{to:"/posts/public"},s.a.createElement("li",null,"管理稿件")),s.a.createElement(S.a,{to:"/users/user"},s.a.createElement("li",null,"管理用户")))):null,s.a.createElement("li",{onClick:this.onLogout.bind(this),className:"logout"},"退出"),s.a.createElement("a",{href:w.b,target:"_blank"},s.a.createElement("li",{className:"logout"},"网站首页"))))}}]),e}(s.a.Component))||a)||a)||a),j=n(2),N=n.n(j),V=(n(78),function(t){function e(t){var n;return m()(this,e),(n=g()(this,k()(e).call(this,t))).state={isShow:!0},n}return y()(e,t),f()(e,[{key:"componentWillMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this;return N.a.interceptors.request.use(function(e){return t._isMounted&&t.setState({isShow:!0}),e}),N.a.interceptors.response.use(function(e){return t._isMounted&&t.setState({isShow:!1}),e}),!0===this.state.isShow?s.a.createElement("div",{className:"loading"},s.a.createElement("div",{className:"img"}),s.a.createElement("div",{className:"text"},"努力加载中……")):null}}]),e}(s.a.Component)),T=n(18),z=n.n(T),D=n(19),A=(n(36),Object(x.a)(i=function(t){function e(t){var n;return m()(this,e),(n=g()(this,k()(e).call(this,t))).state={qq:n.props.match.params.qq,msg:"",name:"",desc:"",level:""},n}return y()(e,t),f()(e,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"loadUser",value:function(){var t=this;Object(q.b)("",0,this.state.qq).then(function(e){200===e.data.code&&t.setState(e.data.user)})}},{key:"handleChange",value:function(t,e){this.setState(z()({},t,e))}},{key:"handleClick",value:function(){var t=this;Object(q.f)(this.state).then(function(e){t.setState({msg:e.data.msg}),setTimeout(function(){t.setState({msg:""})},5e3)})}},{key:"render",value:function(){var t=this;return s.a.createElement("div",null,this.state.msg?s.a.createElement(D.a,{text:this.state.msg,bg:"#b4d896"}):null,s.a.createElement("div",{className:"editor-user"},s.a.createElement("h1",null,"编辑用户"),s.a.createElement("ul",null,s.a.createElement("li",null,"用户名：",s.a.createElement("input",{type:"text",value:this.state.name,onChange:function(e){return t.handleChange("name",e.target.value)}})),s.a.createElement("li",null,"密码：",s.a.createElement("input",{type:"text",placeholder:"留空则不修改",onChange:function(e){return t.handleChange("pwd",e.target.value)}})),s.a.createElement("li",null,"QQ：",s.a.createElement("input",{type:"text",value:this.state.qq,onChange:function(e){return t.handleChange("qq",e.target.value)}})),this.props.state.level>3?s.a.createElement("li",null,"权限：",s.a.createElement("select",{value:this.state.level,onChange:function(e){return t.handleChange("level",e.target.value)}},s.a.createElement("option",{value:"1"},"用户"),s.a.createElement("option",{value:"2"},"作者"),s.a.createElement("option",{value:"3"},"审核"),s.a.createElement("option",{value:"4"},"管理"))):null,s.a.createElement("li",null,"签名：",s.a.createElement("textarea",{value:this.state.desc,onChange:function(e){return t.handleChange("desc",e.target.value)}})),s.a.createElement("li",{className:"center"},s.a.createElement("button",{onClick:this.handleClick.bind(this)},"保存")))))}}]),e}(s.a.Component))||i),I=n(23),U=n(17),L=n(8),_=n.n(L),B=n(45),R=n.n(B),P=(n(98),function(t){function e(){return m()(this,e),g()(this,k()(e).apply(this,arguments))}return y()(e,t),f()(e,[{key:"componentDidMount",value:function(){this.loadEditor()}},{key:"componentWillReceiveProps",value:function(t){this.props.defaultValue!==t.defaultValue&&this.mde.value(t.defaultValue)}},{key:"loadEditor",value:function(){this.mde=new R.a({element:this.marked,autoDownloadFontAwesome:!0,status:!1,spellChecker:!1,forceSync:!0}),this.bindMde()}},{key:"bindMde",value:function(){var t=this;this.mde.codemirror.on("change",function(){t.props.handleMde(t.mde.value())})}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:"simpleMDE"},s.a.createElement("textarea",{ref:function(e){return t.marked=e},disabled:!0}))}}]),e}(s.a.Component)),W=(n(100),Object(x.a)(o=function(t){function e(t){var n;return m()(this,e),(n=g()(this,k()(e).call(this,t))).state={title:"",content:"",sort:"完结",status:"wait",msg:"",uid:parseInt(_.a.get("uid")),id:n.props.match.params.editor,text:"撰写",bg:"",tag:"",time:"",videos:[]},n}return y()(e,t),f()(e,[{key:"componentDidMount",value:function(){this.loadArticle(),this.loadVideo(),"/write-article"===this.props.location.pathname?this.setState({text:"添加"}):this.setState({text:"更新"})}},{key:"handleChange",value:function(t,e){this.setState(z()({},t,e))}},{key:"changeMde",value:function(t){this.setState({content:t})}},{key:"loadArticle",value:function(){var t=this;this.state.id&&Object(I.c)(this.state.id).then(function(e){var n=e.data.result,a=n.title,i=n.content,o=n.sort,r=n.tag,l=n.status,s=n.time;t.setState({title:a,content:i,sort:o,tag:r,status:l,time:s.slice(0,-3),defaultValue:i})})}},{key:"loadVideo",value:function(){var t=this;this.state.id&&Object(U.f)(this.state.id,1,100).then(function(e){t.setState({videos:e.data.videos})})}},{key:"handleClick",value:function(){var t=this;if(!(this.state.title&&this.state.content&&this.state.status&&this.state.sort&&this.state.tag))return this.setState({msg:"都要填写都要填(〃＞皿＜)！",bg:"#ef736e"}),void setTimeout(function(){t.setState({msg:""})},5e3);"/write-article"!==this.props.location.pathname?Object(I.e)(this.state).then(function(e){200===e.data.code&&t.setState({msg:"更新成功啦！",text:"更新",bg:"#b4d896"}),setTimeout(function(){t.props.history.push("/article/".concat(t.state.uid)),t.setState({msg:""})},5e3)}):Object(I.a)(this.state).then(function(e){200===e.data.code&&t.setState({msg:"添加成功啦",bg:"#b4d896"}),setTimeout(function(){t.props.history.push("/article/".concat(t.state.uid)),t.setState({msg:""})},5e3)})}},{key:"selectTag",value:function(t){this.state.tag.indexOf(t)>-1?this.setState({tag:this.state.tag.replace(" ".concat(t),"")}):this.setState({tag:this.state.tag+" "+t})}},{key:"render",value:function(){var t=this;return s.a.createElement("div",null,this.state.msg?s.a.createElement(D.a,{text:this.state.msg,bg:this.state.bg}):null,s.a.createElement("div",{className:"write-article"},s.a.createElement("h1",null,this.state.text,"稿件"),s.a.createElement("li",null,s.a.createElement("input",{type:"text",placeholder:"请输入标题",value:this.state.title,onChange:function(e){return t.handleChange("title",e.target.value)}})),s.a.createElement(P,{handleMde:function(e){return t.changeMde(e)},value:this.state.content,defaultValue:this.state.defaultValue}),s.a.createElement("span",null,s.a.createElement("select",{onChange:function(e){return t.handleChange("sort",e.target.value)},value:this.state.sort},s.a.createElement("option",{value:"原创"},"原创"),s.a.createElement("option",{value:"新番"},"新番"),s.a.createElement("option",{value:"完结"},"完结"),s.a.createElement("option",{value:"剧场版"},"剧场版"),s.a.createElement("option",{value:"影视"},"影视"))),s.a.createElement("span",null,s.a.createElement("select",{onChange:function(e){return t.handleChange("status",e.target.value)},value:this.state.status},s.a.createElement("option",{value:"wait"},"待审核"),s.a.createElement("option",{value:"remove"},"待删除"),s.a.createElement("option",{value:"under"},"已下架"),this.props.state.level>2?s.a.createElement("option",{value:"public"},"发布"):null)),s.a.createElement("span",null,"/write-article"===this.props.location.pathname?null:s.a.createElement("input",{type:"text",value:this.state.time,onChange:function(e){return t.handleChange("time",e.target.value)}})),s.a.createElement("div",{className:"tags"},s.a.createElement("ul",null,["推荐","转载","漫画改","小说改","耽美","乙女","百合","后宫","热血","战斗","运动","奇幻","神魔","搞笑","冒险","校园","恐怖","穿越","推理","科幻","日常","古风","恋爱","r15","泡面番","治愈","鬼畜","AMV/MAD","音乐·PV","游戏·GMV","VOCALOID","影视","特摄","真人剧","其它"].map(function(e,n){return s.a.createElement("li",{onClick:function(){return t.selectTag(e)},key:n,className:t.state.tag.indexOf(e)>-1?"active":""},e)}))),s.a.createElement("div",{className:"video-list"},this.state.videos?this.state.videos.map(function(t){return s.a.createElement(S.a,{to:"/editor-video/"+t.id,key:t.id},s.a.createElement("li",null,s.a.createElement("div",{className:"title"},t.oid)))}):null,"/write-article"===this.props.location.pathname?null:s.a.createElement(S.a,{to:"/add-video/".concat(this.state.id)},s.a.createElement("li",{className:"add"},s.a.createElement("div",null,"＋")))),s.a.createElement("div",null,s.a.createElement("button",{onClick:this.handleClick.bind(this)},this.state.text,"稿件"))))}}]),e}(s.a.Component))||o),J=n(28),Q=n.n(J),F=n(46),G=n.n(F),$=Object(x.a)(r=Object(C.a)(r=function(t){function e(t){var n;return m()(this,e),(n=g()(this,k()(e).call(this,t))).state={id:n.props.match.params.id,oid:"",title:"",content:"",pid:n.props.match.params.pid,text:"修改",uid:parseInt(_.a.get("uid")),zhilian:!0,per:0},n}var n;return y()(e,t),f()(e,[{key:"componentDidMount",value:function(){this.props.location.pathname.indexOf("add-video")>-1?this.setState({text:"添加"}):(this.loadVideo(),this.setState({text:"修改"}))}},{key:"loadVideo",value:function(){var t=this;Object(U.e)(this.state.id).then(function(e){200===e.data.code&&t.setState(e.data.result)})}},{key:"handleChange",value:function(t,e){this.setState(z()({},t,e))}},{key:"deleteVideo",value:function(){var t=this;Object(U.b)(this.state.id).then(function(e){200===e.data.code&&(t.setState({msg:"删除成功啦"}),setTimeout(function(){t.props.history.goBack(),t.setState({msg:""})},2e3))})}},{key:"handleClick",value:function(){var t=this;this.props.location.pathname.indexOf("editor-video")>-1?Object(U.g)(this.state).then(function(e){200===e.data.code&&t.setState({msg:"更新成功啦"}),setTimeout(function(){t.props.history.goBack(),t.setState({msg:""})},2e3)}):this.addVideos()}},{key:"addVideos",value:function(){var t=this;Object(U.a)(this.state).then(function(e){200===e.data.code&&t.setState({msg:"添加成功啦"}),setTimeout(function(){t.props.history.goBack(),t.setState({msg:""})},2e3)})}},{key:"onUpload",value:(n=G()(Q.a.mark(function t(){var e,n,a,i;return Q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,n=this.refs.uploader.files[0],a=this.state.pid+" | "+this.state.oid,t.next=5,Object(U.d)(n.name,a).then(function(t){return t.data.uploadToken});case 5:i=t.sent,console.log(i),new DogeUploader({file:n,token:i,next:function(t){e.setState({per:"".concat(Math.floor(t.percent))})},error:function(t){alert("上传出错( "+t.code+" )："+t.message)},complete:function(t){console.log("上传完成，视频 vid："+t.vid),e.setState({content:"".concat(t.vid,"@dogecloud"),per:0})}}).upload();case 9:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"zhilian",value:function(){this.setState({zhilian:!this.state.zhilian})}},{key:"render",value:function(){var t=this;return s.a.createElement("div",null,this.state.msg?s.a.createElement(D.a,{text:this.state.msg,bg:"#b4d896"}):null,this.state.per?s.a.createElement("div",{className:"per"},this.state.per+"%"):null,s.a.createElement("div",{className:"editor-user"},s.a.createElement("h1",null,this.state.text,"视频"),s.a.createElement("ul",null,s.a.createElement("li",null,"序号：",s.a.createElement("input",{type:"text",value:this.state.oid,placeholder:"数字",onChange:function(e){return t.handleChange("oid",e.target.value)}})),s.a.createElement("li",null,"备注：",s.a.createElement("input",{type:"text",value:this.state.title,placeholder:"可不填",onChange:function(e){return t.handleChange("title",e.target.value)}})),s.a.createElement("li",null,s.a.createElement("span",{onClick:this.zhilian.bind(this)},this.state.zhilian?"直链":"上传"),"：",this.state.zhilian?s.a.createElement("input",{type:"text",value:this.state.content,placeholder:"支持mp4、m3u8等直链",onChange:function(e){return t.handleChange("content",e.target.value)}}):s.a.createElement("div",null,s.a.createElement("div",{id:"uploader"},s.a.createElement("span",null,"上传"),s.a.createElement("input",{type:"file",ref:"uploader",accept:"video/*",onChange:this.onUpload.bind(this)})),s.a.createElement("div",{style:{height:"55px"}}))," "),s.a.createElement("li",{className:"center"},s.a.createElement("button",{onClick:this.handleClick.bind(this)},"提交"),s.a.createElement("button",{onClick:this.deleteVideo.bind(this)},"删除")))))}}]),e}(s.a.Component))||r)||r,H=n(21),K=n.n(H),X=n(134),Y=n(126),Z=K()({loader:function(){return n.e(1).then(n.bind(null,131))},loading:V}),tt=K()({loader:function(){return n.e(2).then(n.bind(null,127))},loading:V}),et=K()({loader:function(){return n.e(3).then(n.bind(null,128))},loading:V}),nt=K()({loader:function(){return n.e(4).then(n.bind(null,129))},loading:V}),at=K()({loader:function(){return n.e(5).then(n.bind(null,130))},loading:V}),it=function(t){function e(){return m()(this,e),g()(this,k()(e).apply(this,arguments))}return y()(e,t),f()(e,[{key:"render",value:function(){return s.a.createElement(X.a,null,s.a.createElement(Y.a,{path:"/login",component:et}),s.a.createElement(Y.a,{path:"/register",component:nt}),s.a.createElement(Y.a,{path:"/",render:function(t){return s.a.createElement("div",null,s.a.createElement(M,null),s.a.createElement(X.a,null,s.a.createElement(Y.a,{path:"/editor-article/:editor",component:W,key:"editor"}),s.a.createElement(Y.a,{path:"/write-article",component:W,key:"write"}),s.a.createElement(Y.a,{path:"/editor-video/:id",component:$,key:"editor-video"}),s.a.createElement(Y.a,{path:"/add-video/:pid",component:$,key:"add-video"}),s.a.createElement(Y.a,{exact:!0,path:"/editor-user/:qq",component:A}),s.a.createElement(Y.a,{path:"/article/:author",component:Z,key:"author"}),s.a.createElement(Y.a,{path:"/posts/:status",component:Z,key:location.pathname}),s.a.createElement(Y.a,{path:"/users/:role",component:tt,key:location.pathname}),s.a.createElement(Y.a,{path:"/",component:at})))}}))}}]),e}(s.a.Component),ot=(n(104),n(106),n(108),{onLogin:function(t,e){var n=t.commit;return e.name&&e.pwd||(n("errMsg","都要填都要填！"),setTimeout(function(){n("errMsg","")},4500)),Object(q.c)(e).then(function(t){n("errMsg",""),200===t.status?n("login",t.data):(n("errMsg",t.data.msg),setTimeout(function(){n("errMsg","")},4500))})},onLogout:function(t){var e=t.commit;return Object(q.d)().then(function(t){200===t.data.code&&(e("logout",t.data),setTimeout(function(){e("errMsg","")},4500))})}}),rt=new O.Store({state:{isAuth:!1,redirectTo:"",bg:"",msg:"",user:{}},mutations:{login:function(t,e){t.msg=e.msg,t.isAuth=!0,t.bg="#b4d896"},errMsg:function(t,e){t.msg=e,t.bg="#ef736e"},logout:function(t){t.isAuth=!1,t.msg="退出成功啦",t.bg="#b4d896"}},actions:ot});c.a.render(s.a.createElement(O.Provider,{store:rt},s.a.createElement(d.a,null,s.a.createElement(it,null))),document.getElementById("app"))},14:function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"d",function(){return r}),n.d(e,"b",function(){return l}),n.d(e,"a",function(){return s});var a=n(42),i=n.n(a);n(8);function o(t){if(/^[0-9]+$/.test(t))return"http://q1.qlogo.cn/g?b=qq&nk=".concat(t,"&s=5");var e=i()(t);return"https://cdn.v2ex.com/gravatar/".concat(e)}function r(t){return t=t.replace("piaoquantv","yishihui")}var l="https://www.clicli.me",s="https://api.clicli.us"},15:function(t,e,n){"use strict";n.d(e,"c",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return d}),n.d(e,"g",function(){return h}),n.d(e,"d",function(){return m}),n.d(e,"b",function(){return p}),n.d(e,"a",function(){return f});var a=n(2),i=n.n(a),o=n(14),r=n(8),l=n.n(r),s=i.a.create({baseURL:o.a});function u(t){return i.a.post("/user/login",{name:t.name,pwd:t.pwd})}function c(t){return i.a.post("/user/register",{name:t.name,pwd:t.pwd,qq:t.qq,level:1,desc:"人懒，竟然没有签名~"})}function d(t){return i.a.post("/user/update/".concat(t.id),{name:t.name,pwd:t.pwd,qq:t.qq,level:parseInt(t.level),desc:t.desc},{headers:{token:l.a.get("token")}})}function h(t){return s.get("/users",{params:{level:t,page:1,pageSize:100}})}function m(){return i.a.post("/user/logout")}function p(t,e,n){return s.get("/user",{params:{uname:t,uid:e,uqq:n}})}function f(){return i.a.get("/auth")}},16:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var a=n(29),i=n.n(a),o=n(3),r=n.n(o),l=n(4),s=n.n(l),u=n(5),c=n.n(u),d=n(6),h=n.n(d),m=n(7),p=n.n(m),f=n(0),v=n.n(f),g=(n(14),n(15)),E=n(8),k=n.n(E);function b(t){return function(e){function n(t){var e;return r()(this,n),(e=c()(this,h()(n).call(this,t))).state={level:1},e}return p()(n,e),s()(n,[{key:"componentDidMount",value:function(){var t=this;Object(g.a)().then(function(e){401===e.data.code?t.props.history.push("/login"):t.setState({level:k.a.get("level")})})}},{key:"render",value:function(){return v.a.createElement(t,i()({state:this.state},this.props))}}]),n}(v.a.Component)}},17:function(t,e,n){"use strict";n.d(e,"f",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"a",function(){return d}),n.d(e,"g",function(){return h}),n.d(e,"b",function(){return m}),n.d(e,"c",function(){return p}),n.d(e,"d",function(){return f});var a=n(2),i=n.n(a),o=n(14),r=n(8),l=n.n(r),s=i.a.create({baseURL:o.a});function u(t,e,n){return s.get("/videos",{params:{pid:t,page:e,pageSize:n}})}function c(t){return s.get("/video/".concat(t))}function d(t){var e=t.oid,n=t.title,a=t.content,r=t.pid,s=t.uid;return a=Object(o.d)(a),i.a.post("/video/add",{oid:parseInt(e),title:n,content:a,pid:parseInt(r),uid:s},{headers:{token:l.a.get("token")}})}function h(t){var e=t.id,n=t.oid,a=t.title,r=t.content,s=t.pid,u=t.uid;return r=Object(o.d)(r),i.a.post("/video/update/".concat(e),{oid:parseInt(n),title:a,content:r,pid:parseInt(s),uid:u},{headers:{token:l.a.get("token")}})}function m(t){return i.a.post("/video/delete?id=".concat(t),{},{headers:{token:l.a.get("token")}})}function p(t){return i.a.post("/video/delete?pid=".concat(t),{},{headers:{token:l.a.get("token")}})}function f(t,e){return i.a.get("https://jx.clicli.us/upload/auth",{params:{fname:t,rname:e}})}},19:function(t,e,n){"use strict";var a=n(3),i=n.n(a),o=n(4),r=n.n(o),l=n(5),s=n.n(l),u=n(6),c=n.n(u),d=n(7),h=n.n(d),m=n(0),p=n.n(m),f=(n(80),function(t){function e(){return i()(this,e),s()(this,c()(e).apply(this,arguments))}return h()(e,t),r()(e,[{key:"render",value:function(){var t=this.props.text;return p.a.createElement("div",{className:"toptip",style:{background:this.props.bg}},t)}}]),e}(p.a.Component));e.a=f},23:function(t,e,n){"use strict";n.d(e,"d",function(){return u}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return d}),n.d(e,"e",function(){return h}),n.d(e,"b",function(){return m});var a=n(2),i=n.n(a),o=n(14),r=n(8),l=n.n(r),s=i.a.create({baseURL:o.a});function u(t,e,n,a,i,o){return s.get("/posts",{params:{status:t,sort:e,tag:n,uid:a,page:i,pageSize:o}})}function c(t){return s.get("/post/".concat(t))}function d(t){var e=t.title,n=t.content,a=t.status,o=t.sort,r=t.tag,s=t.uid;return i.a.post("/post/add",{title:e,content:n,status:a,sort:o,tag:r,uid:s},{headers:{token:l.a.get("token")}})}function h(t){var e=t.id,n=t.title,a=t.content,o=t.status,r=t.sort,s=t.tag,u=t.uid,c=t.time;return i.a.post("/post/update/".concat(e),{title:n,content:a,status:o,sort:r,tag:s,uid:u,time:c},{headers:{token:l.a.get("token")}})}function m(t){return i.a.post("/post/delete/".concat(t),{},{headers:{token:l.a.get("token")}})}},36:function(t,e,n){},73:function(t,e,n){},78:function(t,e,n){},80:function(t,e,n){},96:function(t,e){},98:function(t,e,n){}},[[110,7,6]]]);